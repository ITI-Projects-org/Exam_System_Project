<div class="exam-details-page">
    <!-- Hero Section -->
    <div class="hero-section">
        <div class="container">
            <div class="hero-content">
                <div class="breadcrumb">
                    <a [routerLink]="['/exams']" class="breadcrumb-link">
                        <i class="fas fa-arrow-left"></i>
                        <span>Back to Exams</span>
                    </a>
                </div>
                <div class="exam-header">
                    <div class="exam-title-section">
                        <h1 class="exam-title">{{Exam?.title || 'Loading...'}}</h1>
                        <div class="exam-status" [class]="getExamStatus()">
                            <span class="status-dot"></span>
                            {{getExamStatusText()}}
                        </div>
                    </div>
                    <div class="exam-actions">
                        <a class="btn btn-outline" [routerLink]="['/exams', Exam?.id, 'edit']">
                            <i class="fas fa-edit"></i>
                            <span>Edit Exam</span>
                        </a>
                        <a class="btn btn-primary" [routerLink]="['/exams', Exam?.id, 'take']">
                            <i class="fas fa-play"></i>
                            <span>Take Exam</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Loading State -->
        <div *ngIf="!Exam" class="loading-container">
            <div class="loading-spinner">
                <div class="spinner"></div>
                <p>Loading exam details...</p>
            </div>
        </div>

        <!-- Exam Details Cards -->
        <div *ngIf="Exam" class="exam-details-grid">
            <!-- Basic Information Card -->
            <div class="detail-card">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-info-circle"></i>
                    </div>
                    <h3 class="card-title">Basic Information</h3>
                </div>
                <div class="card-body">
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">Exam ID</div>
                            <div class="info-value">{{Exam.id}}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Course ID</div>
                            <div class="info-value">{{Exam.courseId}}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Questions Count</div>
                            <div class="info-value">{{Exam?.questions?.length || 0}} questions</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Scoring Card -->
            <div class="detail-card">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <h3 class="card-title">Scoring</h3>
                </div>
                <div class="card-body">
                    <div class="scoring-info">
                        <div class="score-item">
                            <div class="score-label">Maximum Score</div>
                            <div class="score-value max-score">{{Exam?.maxDegree}} points</div>
                        </div>
                        <div class="score-item">
                            <div class="score-label">Minimum Score</div>
                            <div class="score-value min-score">{{Exam?.minDegree}} points</div>
                        </div>
                        <div class="score-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" [style.width.%]="getPassPercentage()"></div>
                            </div>
                            <div class="progress-text">Pass Rate: {{getPassPercentage()}}%</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Schedule Card -->
            <div class="detail-card">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <h3 class="card-title">Schedule</h3>
                </div>
                <div class="card-body">
                    <div class="schedule-info">
                        <div class="schedule-item">
                            <div class="schedule-icon">
                                <i class="fas fa-play-circle"></i>
                            </div>
                            <div class="schedule-details">
                                <div class="schedule-label">Start Date & Time</div>
                                <div class="schedule-value">{{Exam?.startDate ? formatDate(Exam.startDate) : 'N/A'}}
                                </div>
                            </div>
                        </div>
                        <div class="schedule-item">
                            <div class="schedule-icon">
                                <i class="fas fa-stop-circle"></i>
                            </div>
                            <div class="schedule-details">
                                <div class="schedule-label">End Date & Time</div>
                                <div class="schedule-value">{{Exam ? formatDate(getEndDate()) : 'N/A'}}</div>
                            </div>
                        </div>
                        <div class="schedule-item">
                            <div class="schedule-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="schedule-details">
                                <div class="schedule-label">Duration</div>
                                <div class="schedule-value">{{Exam?.duration}} minutes</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Time Remaining Card -->
            <div class="detail-card">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-hourglass-half"></i>
                    </div>
                    <h3 class="card-title">Time Status</h3>
                </div>
                <div class="card-body">
                    <div class="time-status">
                        <div class="time-display" [class]="getTimeStatusClass()">
                            <div class="time-value">{{getTimeRemaining()}}</div>
                            <div class="time-label">{{getTimeStatusText()}}</div>
                        </div>
                        <div class="time-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" [style.width.%]="getTimeProgress()"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Questions Preview Card -->
            <div class="detail-card full-width">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-question-circle"></i>
                    </div>
                    <h3 class="card-title">Questions Preview</h3>
                </div>
                <div class="card-body">
                    <div *ngIf="Exam?.questions && Exam.questions.length > 0" class="questions-list">
                        <div *ngFor="let question of Exam.questions; let i = index" class="question-item">
                            <div class="question-header">
                                <span class="question-number">Q{{i + 1}}</span>
                                <span class="question-degree">{{question.degree}} points</span>
                            </div>
                            <div class="question-title">{{question.title}}</div>
                            <div *ngIf="question.options && question.options.length > 0" class="options-list">
                                <div *ngFor="let option of question.options; let j = index" class="option-item">
                                    <!-- <span class="option-letter">{{String.fromCharCode(65 + j)}}.</span> -->
                                    <span class="option-text">{{option.title}}</span>
                                    <span *ngIf="option.isCorrect" class="correct-badge">
                                        <i class="fas fa-check"></i>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div *ngIf="!Exam.questions || Exam.questions.length === 0" class="no-questions">
                        <div class="no-questions-icon">
                            <i class="fas fa-question"></i>
                        </div>
                        <p>No questions have been added to this exam yet.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div *ngIf="Exam" class="action-buttons">
            <a class="btn btn-outline" [routerLink]="['/exams']">
                <i class="fas fa-arrow-left"></i>
                <span>Back to Exams</span>
            </a>
            <a class="btn btn-secondary" [routerLink]="['/exams', Exam?.id, 'edit']">
                <i class="fas fa-edit"></i>
                <span>Edit Exam</span>
            </a>
            <a class="btn btn-primary" [routerLink]="['/exams', Exam?.id, 'take']">
                <i class="fas fa-play"></i>
                <span>Take Exam</span>
            </a>
        </div>
    </div>
</div>